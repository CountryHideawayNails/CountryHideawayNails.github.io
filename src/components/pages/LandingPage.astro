---
import "../../styles/home_page.css";
import Image from "astro/components/Image.astro";
import cabin from "../../assets/images/cabin.webp";
import owner from "../../assets/images/owner.webp";
import NavLayout from "../layouts/NavLayout.astro";
import translate from "../../utils/content/translation";
import FacebookEmbed from "../embeds/FacebookEmbed.astro";
import paper_tear from "../../assets/images/paper_tear.webp";
import external_links from "../../config/external_links.json";
import type { Languages } from "../../config/language_config";
import ReviewCard, { type ReviewCardProps } from "../content/ReviewCard.astro";

interface Props {
    language: Languages;
};

const gallery_images: Record<string, { default: ImageMetadata }> = import.meta.glob<{ default: ImageMetadata }>(
    "../../assets/gallery/*.{png,jpg,jpeg,webp,svg}", {
    eager: true
});

const reviews: ReviewCardProps[] = [
    {
        customer_name: "Angela L.",
        review_text: translate(Astro.props.language, "home_page", "review_text_1"),
        star_count: 5,
        color: "#f2597b"
    }, {
        customer_name: "Crystal F.",
        review_text: translate(Astro.props.language, "home_page", "review_text_2"),
        star_count: 5,
        color: "#23bfd4"
    }, {
        customer_name: "Sharon R.",
        review_text: translate(Astro.props.language, "home_page", "review_text_3"),
        star_count: 5,
        color: "#05df72"
    }
];
---

<NavLayout language={Astro.props.language}>
    <!-- * Hero Section * -->

    <section class="hero-section" style={`--hero-image: url("${cabin.src}");`}>
        <h1 class="text-bright text-shadow weight-normal text-2xl font-instrument-serif text-center">
            {translate(Astro.props.language, "home_page", "hero_main_tag_line")}
        </h1>

        <h2 class="text-bright text-shadow weight-normal text-xl font-la-belle-aurore text-center">
            {translate(Astro.props.language, "home_page", "hero_company_name")}
        </h2>

        <div class="hero-buttons-container">
            <a
                class="chn-black-button drop-shadow"
                href={external_links.booking}
            >
                {translate(Astro.props.language, "home_page", "hero_book_call_to_act")}
            </a>

            <a
                class="chn-green-button drop-shadow"
                href={`/${Astro.props.language}/services`}
            >
                {translate(Astro.props.language, "home_page", "hero_prices_call_to_act")}
            </a>
        </div>

        <div
            class="paper-tear"
            style={`--paper-tear-image: url("${paper_tear.src}"); --paper-tear-color: var(--color-chn-tan);`}
        />
    </section>

    <!-- * About Section * -->

    <section class="home-flex-container">
        <Image
            src={owner}
            alt="Owner-Portrait"
            class="about-owner-portrait"
        />

        <div class="home-paragraph-block">
            <h1 class="text-dark weight-normal font-la-belle-aurore text-lg">
                {translate(Astro.props.language, "home_page", "about_title")}
            </h1>

            <p>
                {translate(Astro.props.language, "home_page", "about_paragraph")}
            </p>
        </div>
    </section>

    <!-- * Reviews Section * -->

    <section class="bg-chn-brown reviews-section">
        <h1 class="text-bright weight-normal font-instrument-serif text-2xl home-large-title">
            {translate(Astro.props.language, "home_page", "review_title")}
        </h1>

        <div class="review-cards-container">
            {reviews.map((review) => (
                <ReviewCard {...review} />
            ))}
        </div>

        <div
            class="paper-tear"
            style={`--paper-tear-image: url("${paper_tear.src}"); --paper-tear-color: var(--color-chn-black);`}
        />
    </section>

    <!-- * Community Section * -->

    <section class="bg-chn-black home-flex-container">
        <div class="home-paragraph-block">
            <h1 class="text-bright weight-normal font-la-belle-aurore text-lg">
                {translate(Astro.props.language, "home_page", "community_title")}
            </h1>

            <p class="text-light">
                {translate(Astro.props.language, "home_page", "community_paragraph_link_prefix")}
                <a
                    class="hyperlink"
                    href={external_links.facebook}
                >
                    {translate(Astro.props.language, "home_page", "community_paragraph_link")}
                </a>
                {translate(Astro.props.language, "home_page", "community_paragraph_link_suffix")}
            </p>
        </div>

        <FacebookEmbed
            class="home-facebook-embed"
            embed_link={external_links.facebook_group}
            pixel_width={500}
            pixel_height={400}
        />
    </section>

    <!-- * Gallery Section * -->

    <section class="gallery-section">
        <h1 class="text-dark weight-normal font-instrument-serif text-2xl home-large-title">
            {translate(Astro.props.language, "home_page", "gallery_title")}
        </h1>

        <div class="gallery-images-grid">
            {Object.entries(gallery_images).map(([path, data]) => (
                <Image
                    src={data.default}
                    alt={`${path.split("/").pop()}`}
                    loading="lazy"
                    class="gallery-image"
                    style={`--gallery-image-aspect: ${data.default.width} / ${data.default.height};`}
                />
            ))}
        </div>
    </section>
</NavLayout>